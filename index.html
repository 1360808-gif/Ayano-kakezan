<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>„Åã„ÅëÁÆó„Çå„Çì„Åó„ÇÖ„ÅÜÔºà3Âπ¥ÁîüÔºâ</title>

<style>
body{
  margin:0;
  font-family:system-ui,-apple-system,"Hiragino Sans","Noto Sans JP",sans-serif;
  background:#f7f8ff;
  color:#1f2937;
}
.wrap{
  max-width:800px;
  margin:24px auto;
  padding:16px;
}
.card{
  background:#fff;
  border-radius:16px;
  padding:24px;
  box-shadow:0 10px 24px rgba(0,0,0,.08);
}
h1{
  margin:0 0 16px;
  font-size:22px;
}
.question{
  font-size:40px;
  text-align:center;
  margin:24px 0;
}
.answer{
  display:block;
  width:100%;
  font-size:24px;
  padding:12px;
  text-align:center;
}
button{
  margin-top:16px;
  width:100%;
  padding:14px;
  font-size:18px;
  border:none;
  border-radius:12px;
  background:#4f46e5;
  color:#fff;
  cursor:pointer;
}
button:disabled{
  background:#a5b4fc;
}
.message{
  margin-top:16px;
  text-align:center;
  font-size:18px;
}
</style>
</head>

<body>
<div class="wrap">
  <div class="card">
    <h1>„Åã„ÅëÁÆó„Çå„Çì„Åó„ÇÖ„ÅÜ</h1>

    <div class="question" id="question">„ÇÇ„Çì„Å†„ÅÑ„Çí„Å§„Åè„Å£„Å¶„Å≠</div>

    <input
      type="number"
      id="answer"
      class="answer"
      placeholder="„Åì„Åü„Åà„ÇíÂÖ•Âäõ"
      disabled
    />

    <button id="makeBtn">„ÇÇ„Çì„Å†„ÅÑ„Çí„Å§„Åè„Çã</button>

    <div class="message" id="message"></div>
  </div>
</div>

<script>
// ===============================
// Âá∫È°å„Åó„Åü„ÅÑÂïèÈ°åÔºàÂõ∫ÂÆöÔºâ
// ===============================
const baseQuestions = [
  [3, 9],
  [4, 6],
  [4, 7],
  [4, 8],
  [4, 9],
  [7, 4],
  [7, 8],
  [8, 4],
  [9, 3],
  [9, 4]
];

// ===============================
// Â§âÊï∞
// ===============================
let questions = [];
let currentIndex = 0;
let correctAnswer = 0;

// ===============================
// „Ç∑„É£„ÉÉ„Éï„É´ÔºàÈ´òÈÄüÔºâ
// ===============================
function shuffle(array){
  for(let i = array.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

// ===============================
// ÂïèÈ°å„Çí‰Ωú„Çã
// ===============================
function makeQuestions(){
  questions = baseQuestions.slice(); // „Ç≥„Éî„Éº
  shuffle(questions);                // „É©„É≥„ÉÄ„É†Âåñ
  currentIndex = 0;

  document.getElementById("message").textContent = "";
  document.getElementById("answer").disabled = false;
  document.getElementById("answer").value = "";
  document.getElementById("answer").focus();

  nextQuestion();
}

// ===============================
// Ê¨°„ÅÆÂïèÈ°å
// ===============================
function nextQuestion(){
  if(currentIndex >= questions.length){
    document.getElementById("question").textContent = "„Åú„Çì„Å∂„Åä„Çè„ÇäÔºÅ";
    document.getElementById("message").textContent = "„Çà„Åè„Åå„Çì„Å∞„Çä„Åæ„Åó„Åü üéâ";
    document.getElementById("answer").disabled = true;
    return;
  }

  const [a, b] = questions[currentIndex];
  correctAnswer = a * b;

  document.getElementById("question").textContent = `${a} √ó ${b}`;
  document.getElementById("answer").value = "";
  document.getElementById("answer").focus();

  currentIndex++;
}

// ===============================
// Ê≠£Ë™§Âà§ÂÆö
// ===============================
document.getElementById("answer").addEventListener("keydown", e => {
  if(e.key !== "Enter") return;

  if(Number(e.target.value) === correctAnswer){
    nextQuestion();
  }
});

// ===============================
// „Éú„Çø„É≥
// ===============================
document.getElementById("makeBtn").addEventListener("click", makeQuestions);
</script>
</body>
</html>
